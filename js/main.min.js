var mlsInfo={};mlsInfo.apiUrl="https://sheetsu.com/apis/v1.0/90c54b608efe",mlsInfo.playersObject={},mlsInfo.teamsDuplicates=[],mlsInfo.teams=[],mlsInfo.playersSorted=[],mlsInfo.teamsStanding=[],mlsInfo.numberWithCommas=function(a){return a=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},mlsInfo.init=function(){$(".landing h1").css({visibility:"visible",opacity:1}),$(".landing").delay(1600).fadeOut(1e3),$(".logo").delay(2600).css({visibility:"visible",opacity:1}),mlsInfo.getData()},mlsInfo.getData=function(){$.ajax({url:mlsInfo.apiUrl,method:"GET",dataType:"json"}).then(function(a){mlsInfo.playersObject=a,mlsInfo.getTeams(a)})},mlsInfo.getTeams=function(){for(var a=0;a<mlsInfo.playersObject.length;a++)mlsInfo.teamsDuplicates.push(mlsInfo.playersObject[a].Club);$.each(mlsInfo.teamsDuplicates,function(a,e){$.inArray(e,mlsInfo.teams)===-1&&mlsInfo.teams.push(e)}),mlsInfo.populateSelect(),$(".hero-team-select, .hero-header-title, .titleSelectDiv").css({visibility:"visible",opacity:1}),mlsInfo.teamSelect(),mlsInfo.teamArrays()},mlsInfo.teamArrays=function(){for(var a=0;a<mlsInfo.teams.length;a++){mlsInfo.playersSorted[mlsInfo.teams[a]]=[];for(var e=0;e<mlsInfo.playersObject.length;e++)mlsInfo.playersObject[e].Club===mlsInfo.teams[a]&&mlsInfo.playersSorted[mlsInfo.teams[a]].push(mlsInfo.playersObject[e])}mlsInfo.sortTeamsStanding()},mlsInfo.populateSelect=function(){for(var a=0;a<mlsInfo.teams.length;a++)$("#teamSelect, #teamSelect-title").append('<option value="'+mlsInfo.teams[a]+'">'+mlsInfo.teams[a]+"</option>");mlsInfo.fieldChange()},mlsInfo.fieldChange=function(){$("#teamSelect").on("change",function(){var a=$("#teamSelect").val(),e=mlsInfo.playersSorted[a];"Select Team"!==a&&(e.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),mlsInfo.selectedTeamLogo=$('input[value="'+a+'"] + label > img').attr("src"),mlsInfo.printInfo(e),mlsInfo.printTeamNumbers(e,a))}),$("#teamSelect-title").on("change",function(){var a=$("#teamSelect-title").val(),e=mlsInfo.playersSorted[a];$(".hero-header").css("display","none"),"Select Team"!==a&&(e.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),mlsInfo.selectedTeamLogo=$('input[value="'+a+'"] + label > img').attr("src"),mlsInfo.printInfo(e),mlsInfo.printTeamNumbers(e,a))})},mlsInfo.teamSelect=function(){$('input[name="team"]').change(function(){var a=$("input[name=team]:checked").val();console.log(a);var e=mlsInfo.playersSorted[a];mlsInfo.selectedTeamLogo=$("input[name=team]:checked + label > img").attr("src"),mlsInfo.printInfo(e),mlsInfo.printTeamNumbers(e,a),$("html, body").scrollTop(0),$(".hero-header").slideUp(1e3)})},mlsInfo.printInfo=function(a){a.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)}),console.log(a),$("#playersTable tbody").empty().hide(),$(".detailForMobile").empty().hide();for(var e="<div class='dp-icon'>DP</div>",t="<div class='dp-icon'>YDP</div>",n=0;n<a.length;n++){var s=$("<td>").append(a[n].FirstName+" "+a[n].LastName),l=$("<summary>").append(a[n].FirstName+" "+a[n].LastName+" ("+a[n].Pos+")"),o=$("<td>").append(a[n].Pos),m=$("<td>").append(a[n].BaseSalary),r=$("<p>").append("<span>Base Salary <span>"+a[n].BaseSalary),i=$("<td>").append(a[n].Compensation),p=$("<p>").append("<span>Compensation <span>"+a[n].Compensation);if(a[n].SalaryCapHitNUM>=457500)var f=$("<td>").append("$457 500.00"),d=$("<p>").append("<span>Salary Cap Hit<span> $457 500.00");else var f=$("<td>").append(a[n].SalaryCapHit),d=$("<p>").append("<span>Salary Cap Hit <span>"+a[n].SalaryCapHit);"DP"===a[n].Status&&"Y"===a[n].Young?(s=$("<td>").append(a[n].FirstName+" "+a[n].LastName+t),l=$("<summary>").append(a[n].FirstName+" "+a[n].LastName+" ("+a[n].Pos+")"+t)):"DP"===a[n].Status&&(s=$("<td>").append(a[n].FirstName+" "+a[n].LastName+e),l=$("<summary>").append(a[n].FirstName+" "+a[n].LastName+" ("+a[n].Pos+")"+e));var I=$("<tr>").append(s,o,m,i,f);$("#playersTable").append(I);var c=$('<details class="detailElements">').append(l,r,p,d);$(".detailForMobile").append(c)}$("#playersTable tbody").fadeIn(600),$(".detailForMobile").fadeIn(600)},mlsInfo.tableSorterInit=function(){$("#playersTable").tablesorter()},mlsInfo.printTeamNumbers=function(a,e){$(".team-info, .main-team-stats").hide(),a.sort(function(a,e){return parseFloat(e.SalaryCapHitNUM)-parseFloat(a.SalaryCapHitNUM)});var t=a.slice(0,18);console.log(t);for(var n=366e4,s=0,l=0,o=0;o<a.length;o++)var l=l+parseInt(a[o].BaseSalaryNUM,10);for(var o=0;o<t.length;o++)if(t[o].SalaryCapHitNUM>=457500)var s=s+parseInt(457500,10);else var s=s+parseInt(t[o].SalaryCapHitNUM,10);var m=n-s,r=mlsInfo.numberWithCommas(s);console.log(r);var i=mlsInfo.numberWithCommas(n);console.log(i);var p=mlsInfo.numberWithCommas(m);console.log(p);var f=mlsInfo.numberWithCommas(l);console.log(f);for(var d=0,o=0;o<a.length;o++)"DP"===a[o].Status&&(d+=1,console.log(d));var I=$("<h1>").append(e);$(".team-name h1").replaceWith(I);var c=$("<h2>").append("$"+f);$(".team-total-salary h2").replaceWith(c);var S=$("<h2>").append("$"+r);$(".team-cap-hit h2").replaceWith(S);var y=$("<h2>").append("$"+p);$(".team-cap-space h2").replaceWith(y);var g=$("<h2>").append(d);$(".team-dps h2").replaceWith(g);var u=$("<img>").attr("src",mlsInfo.selectedTeamLogo);$(".team-emblem").empty().append(u),$(".team-info, .main-team-stats").fadeIn(800)},mlsInfo.sortTeamsStanding=function(){for(var a=0;a<mlsInfo.teams.length;a++){for(var e=0,t=0,n=0;n<mlsInfo.playersSorted[mlsInfo.teams[a]].length;n++){mlsInfo.teamsStanding[a]={};var e=parseInt(e,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][n].BaseSalaryNUM,10),t=parseInt(t,10)+parseInt(mlsInfo.playersSorted[mlsInfo.teams[a]][n].SalaryCapHitNUM,10)}mlsInfo.teamsStanding[a].totalCapSalaryMass=t,mlsInfo.teamsStanding[a].totalSalaryMass=e,mlsInfo.teamsStanding[a].teamName=mlsInfo.teams[a]}mlsInfo.teamsStanding.sort(function(a,e){return parseFloat(e.totalSalaryMass)-parseFloat(a.totalSalaryMass)});for(var n=0;n<mlsInfo.teamsStanding.length;n++)mlsInfo.teamsStanding[n].totalSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[n].totalSalaryMass),mlsInfo.teamsStanding[n].totalCapSalaryMass="$"+mlsInfo.numberWithCommas(mlsInfo.teamsStanding[n].totalCapSalaryMass);mlsInfo.printTeamsStanding()},mlsInfo.printTeamsStanding=function(){$("#teamsStandingTable tbody").empty().hide();for(var a=0;a<mlsInfo.teamsStanding.length;a++){var e=mlsInfo.teamsStanding[a].teamName.replace(/\s+/g,"-"),t=$("<td>").append('<a href="#">'+mlsInfo.teamsStanding[a].teamName+"</a>"),n=$("<td>").append(mlsInfo.teamsStanding[a].totalSalaryMass),s=$("<tr>").append(t,n).addClass("teamStandingLink").attr("id",e);$("#teamsStandingTable").append(s)}$("#teamsStandingTable").fadeIn(600),mlsInfo.teamStandingLinkActivate()},mlsInfo.teamStandingLinkActivate=function(){$(".teamStandingLink").on("click",function(a){a.preventDefault();var e=$(this).attr("id"),e=e.replace(/-/g," ");console.log(e);var t=mlsInfo.playersSorted[e];console.log(t);var n=e;mlsInfo.selectedTeamLogo=$('input[value="'+e+'"] + label > img').attr("src"),mlsInfo.printInfo(t),mlsInfo.printTeamNumbers(t,n),$("html, body").animate({scrollTop:$(".team-info-screen").offset().top},600)})},$(function(){mlsInfo.init()});